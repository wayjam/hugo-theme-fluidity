<!-- Share component -->
<div id="share">
  {{- if not (or .Site.Params.social.share.disabled (in .Site.Params.social.share.disableByType .Type)) -}}
    <h2 class="text-lg font-medium text-neutral-800 dark:text-neutral-200 mb-4">
      {{- i18n "shareWith" | strings.Title -}}
    </h2>
    <div class="flex flex-wrap justify-between gap-1 items-center space-y-1">
      {{- $tag_list := "" -}}
      {{- with .Params.Tags -}}
        {{- $tag_list = delimit . "," -}}
      {{- end -}}

      {{/* Define default social platforms */}}
      {{- $default_platforms := dict
        "reddit" (dict
        "name" "Reddit"
        "url" "https://reddit.com/submit?url=%s&title=%s")
        "x" (dict
        "name" "X.com"
        "url" "https://x.com/intent/tweet/?text=%s&url=%s&hashtags=%s")
        "facebook" (dict
        "name" "Facebook"
        "url" "https://facebook.com/sharer/sharer.php?u=%s")
        "google" (dict
        "name" "Google"
        "url" "https://www.google.com/bookmarks/mark?op=edit&bkmk=%s&title=%s")
        "telegram" (dict
        "name" "Telegram"
        "url" "https://telegram.me/share/url?url=%s&text=%s")
      -}}

      {{/* Render configured platforms */}}
      {{- range .Site.Params.social.share.platforms -}}
        {{- $platform_name := .name | lower -}}
        {{- $url := .url -}}
        {{- $display_name := .name | title -}}

        {{/* Handle inherit platform */}}
        {{- with index $default_platforms $platform_name -}}
          {{- if not $url -}}
            {{- $url = .url -}}
          {{- end -}}
          {{- $display_name = .name -}}
        {{- end -}}

        {{/* Generate share URL */}}
        {{- $final_url := "" -}}
        {{- if eq $platform_name "x" -}}
          {{- $final_url = printf $url $.Title $.Permalink $tag_list -}}
        {{- else if or (eq $platform_name "reddit") (eq $platform_name "google") -}}
          {{- $final_url = printf $url $.Permalink $.Title -}}
        {{- else if eq $platform_name "facebook" -}}
          {{- $final_url = printf $url $.Permalink -}}
        {{- else -}}
          {{- $final_url = printf $url $.Permalink $.Title -}}
        {{- end -}}

        {{- partial "inline/share/item.html" (dict
          "Name" $display_name
          "Title" $.Title
          "URL" $final_url)
        -}}
      {{- end -}}
    </div>
  {{- end -}}
</div>

{{- define "partials/inline/share/item.html" -}}
  <a
    href="{{- .URL -}}"
    target="_blank"
    rel="noopener noreferrer"
    class="inline px-2 py-1 rounded-lg
    text-sm font-medium
      bg-white/60 dark:bg-neutral-800/60
      text-neutral-700 dark:text-neutral-300
      border border-neutral-200/50 dark:border-neutral-700/50
      hover:bg-blue-50/90 dark:hover:bg-blue-900/30
      hover:border-blue-200 dark:hover:border-blue-800
      hover:text-blue-700 dark:hover:text-blue-200
      hover:scale-105
      focus:outline-none focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800
      transform-gpu transition-all duration-200 ease-out
      shadow-sm"
    aria-label="share {{- .Title | plainify -}} on {{- .Name -}}">
    {{- .Name -}}
  </a>
{{- end -}}
